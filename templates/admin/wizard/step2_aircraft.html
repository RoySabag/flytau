{% extends 'admin/base.html' %}

{% block admin_content %}
<div class="mb-4">
    <h4>Step 2: Select Aircraft</h4>
    <div class="progress" style="height: 5px;">
        <div class="progress-bar" role="progressbar" style="width: 66%;" aria-valuenow="66" aria-valuemin="0"
            aria-valuemax="100"></div>
    </div>
</div>

<div class="alert alert-info">
    <strong>Flight Info:</strong> {{ route_info.origin_airport }} &rarr; {{ route_info.destination_airport }}<br>
    <strong>Duration:</strong> {{ route_info.flight_duration }}<br>
    <strong>Constraint:</strong> {% if route_info.flight_duration.total_seconds() > 21600 %}Long Haul (Big Aircraft
    Only){% else %}Short Haul{% endif %}
</div>

<form method="POST">
    <div class="list-group mb-4">
        {% if not aircrafts %}
        <div class="list-group-item list-group-item-danger">
            No aircrafts available for this time slot.
        </div>
        {% else %}
        {% for aircraft in aircrafts %}
        <label class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <div>
                <input class="form-check-input me-1" type="radio" name="aircraft_id" value="{{ aircraft.aircraft_id }}"
                    required>
                <strong>{{ aircraft.manufacturer }} ({{ aircraft.size }})</strong>
                <div class="text-muted small">
                    Status: {{ aircraft.ui_status }}
                    {% if aircraft.ferry_needed %}
                    <span class="badge bg-warning text-dark">Ferry Needed</span>
                    {% endif %}
                </div>
            </div>
            <span class="badge bg-secondary rounded-pill">Priority: {{ aircraft.priority_score }}</span>
        </label>
        {% endfor %}
        {% endif %}
    </div>

    <div class="d-flex justify-content-between mt-4">
        <a href="{{ url_for('admin.create_flight_step1') }}" class="btn btn-outline-secondary">&larr; Back</a>
        <button type="submit" class="btn btn-primary" {% if not aircrafts %}disabled{% endif %}>Next: Select Crew
            &rarr;</button>
    </div>
</form>
{% endblock %}